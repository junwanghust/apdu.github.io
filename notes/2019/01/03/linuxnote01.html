<!DOCTYPE html>
<html>
<head>
    <!--
    * Author:         APDU
    -->
    
  
    <meta charset="utf-8" />
    <title>Linux笔记：开始使用Linux | Notes</title>
    <meta name="author" content="ZM" />
    <meta name="renderer" content="webkit">
    <meta name="description" content="Notes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
	<link rel="stylesheet" href="/css/default.css" type="text/css" />  
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />  
    <script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>
	<script src="/js/prettify/prettify.js"></script>
		
    <!--script src="/js/mermaid/mermaid.min.js"></script-->
	<script src="https://cdn.bootcss.com/mermaid/8.0.0/mermaid.min.js"></script>	
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ], 
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code', 'a', 'blockquote'] 
      }
    });
	</script>
	
	<!--script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script-->
	<script src="https://cdn.bootcss.com/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"  type="text/javascript"></script>
	 
</head>
<body>
       
    <div class="index-content">
    <div class="section">
        <ul class="artical-cate">
            <li style="text-align:left"><a href="/"><span>Home</span></a></li>
            <li style="text-align:center"><a href="/category"><span>Index</span></a></li>
            <li style="text-align:right"><a href="/about"><span>About</span></a></li>
        </ul>
	</div>
	
	
</div>	

<div id="content">
	<h1 class="entry-title"><a href="/notes/2019/01/03/linuxnote01.html" title="Linux笔记：开始使用Linux">Linux笔记：开始使用Linux</a></h1>
	<p class="entry-date">2019-01-03</p>
	<h3 id="1-terminal">1. Terminal</h3>

<p>Linux是多用户系统，一台主机可以连接多台字符终端，终端作为交互式输入输出设备。</p>

<h5 id="11-字符终端的历史">1.1 字符终端的历史</h5>

<p>英文打字机:typewriter;<br />
电传打字机:tele-typewriter，简写tty;<br />
字符终端:以屏幕代替卷纸打印机，仍称作tty设备。</p>

<h5 id="12-字符终端设置">1.2 字符终端设置</h5>

<p>相关命令stty。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//查看当前终端设置
stty -a

//设置Ctrl+h键为删除
stty erase ^h
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//stty -a 执行后的结果
zm@acer:~$ stty -a
speed 38400 baud; rows 41; columns 113; line = 0;
intr = ^C; quit = ^\; erase = ^?; kill = ^U; eof = ^D; eol = M-^?; eol2 = M-^?; swtch = M-^?; start = ^Q;
stop = ^S; susp = ^Z; rprnt = ^R; werase = ^W; lnext = ^V; discard = ^O; min = 1; time = 0;
-parenb -parodd -cmspar cs8 hupcl -cstopb cread -clocal -crtscts
-ignbrk brkint -ignpar -parmrk -inpck -istrip -inlcr -igncr icrnl ixon -ixoff -iuclc ixany imaxbel iutf8
opost -olcuc -ocrnl onlcr -onocr -onlret -ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0
isig icanon iexten echo echoe echok -echonl -noflsh -xcase -tostop -echoprt echoctl echoke -flusho -extproc
</code></pre></div></div>

<h3 id="2-用户">2. 用户</h3>

<h5 id="21-root用户">2.1 root用户</h5>
<p>root不受权限的制约，可随意修改和删除文件，误删重要文件可能带来严重后果。</p>

<h5 id="22-创建新用户">2.2 创建新用户</h5>
<p>由root用户创建（useradd命令），用户信息存放在/etc/passwd文件中， 包括用户名、用户id、home目录、登录shell等，
shell一般为bash，也可以选其他shell，其他系统程序，甚至自设计的程序。</p>

<h5 id="23-shell提示符">2.3 shell提示符</h5>
<p>用户登录成功后会出现shell提示符: <br />
 <strong>$</strong> Bourne Shell系列 (sh，ksh，bash)；  <br />
 <strong>#</strong> 当前用户为root。</p>

<h3 id="3-手册查阅">3. 手册查阅</h3>

<p>命令man常见用法:</p>
<ol>
  <li>man name，name可以是指令也可以是函数等，例如pwd,memcpy；</li>
  <li>man section name，section为章节编号，某个关键字可能在多个章节中出现，指定section则显示指定章节；</li>
  <li>man -k regexp，列出与正则表达式regexp匹配的关键字(keyword)的手册项目录。</li>
</ol>

<p>Ubuntu系统中section取值如下(可通过man man获取)：</p>
<blockquote>
  <p>1 Executable programs or shell commands<br />
 2 System calls (functions provided by the kernel)<br />
 3 Library calls (functions within program libraries)<br />
 4 Special files (usually found in /dev)<br />
 5 File formats and conventions eg /etc/passwd<br />
 6 Games<br />
 7 Miscellaneous (including macro packages and conventions), e.g. man(7), groff(7)<br />
 8 System administration commands (usually only for root)<br />
 9 Kernel routines [Non standard]</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//man -k memcpy 执行后的结果
zm@acer:~$ man -k memcpy
memcpy (3)           - copy memory area
wmemcpy (3)          - copy an array of wide-characters
</code></pre></div></div>

<p>注意：man显示的内容，通常超过一行，在Ubuntu中Space可以翻页，Enter/j往下显示一行，k往上显示一行，q退出，
翻页也可使用Page Up与Page Down。</p>

<h3 id="4-几个简单口令">4. 几个简单口令</h3>

<h5 id="41-时间">4.1 时间</h5>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zm@acer:~$ date
Wed Jan  2 23:57:18 DST 2019
</code></pre></div></div>

<h5 id="42-日历">4.2 日历</h5>
<p>cal<br />
cal year <br />
cal month year</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cal         //打印当前月份的日历
cal 2020    //打印2020年的日历
cal 10 2019 //打印2019年10月份的日历
cal 12      //打印公元12年的日历
</code></pre></div></div>

<h5 id="43-计算器">4.3 计算器</h5>
<p>bc支持数学函数库、变量、循环等，可以进行任意精度的计算。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bc           //打开计算器，缺省精度为小数点后0位
bc -l        //打开计算器，缺省精度为小数点后20位
scale        //打印bc精度，
scale = 100  //自定义小数点后的位数为100为 
</code></pre></div></div>

<h5 id="44-口令">4.4 口令</h5>
<p><strong>普通用户</strong> 使用passwd命令更改自己的口令，更改前系统先验证原来的口令。<br />
<strong>超级用户</strong> 修改口令前不需要验证旧的口令，也可以更改其他用户的口令。</p>

<p>注意：超级用户修改自己的口令后建议不要关闭当前终端，用其他终端登录一下是否修改正确。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passwd       //普通用户or超级用户修改自己的口令
passwd zm    //超级用户修改用户zm的口令
</code></pre></div></div>

<h3 id="5-了解系统状态">5. 了解系统状态</h3>

<h5 id="51-w">5.1 w</h5>

<p>显示已经登录的用户及正在进行的操作。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zm@acer:~$ w
 17:10:24 up 5 min,  1 user,  load average: 0.11, 0.60, 0.35
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
zm       tty7     :0               17:07    4:56   5.78s  0.41s /sbin/upstart -
</code></pre></div></div>

<h5 id="52-who">5.2 who</h5>

<p>显示已经登录的用户名、终端名称、登录时间。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zm@acer:~$ who
zm       tty7         2019-01-03 17:07 (:0)
</code></pre></div></div>

<h5 id="53-whoami">5.3 whoami</h5>

<p>显示当前用户的用户名。</p>

<h5 id="54-who-am-i">5.4 who am i</h5>

<p>显示登录系统的时候的用户名，即使已经切换到其他用户也显示登录时的用户。</p>

<h5 id="55-tty">5.5 tty</h5>

<p>显示当前终端的设备文件名。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zm@acer:~$ tty
/dev/tty1
</code></pre></div></div>

<h5 id="56-uptime">5.6 uptime</h5>

<p>系统运行时间、登录用户数、近1分钟、5分钟、15分钟的CPU负载。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zm@acer:~$ uptime 
 17:11:01 up 5 min,  1 user,  load average: 0.06, 0.54, 0.34
</code></pre></div></div>

<h5 id="57-top">5.7 top</h5>

<p>列出资源占用排名靠前的进程。</p>

<blockquote>
  <p>VIRT 进程逻辑地址空间大小(virtual)<br />
RES 驻留内存数(Resident),也就是占用物理内存数<br />
SHR 与其他进程共享的内存数(share)<br />
%CPU 占用CPU百分比<br />
%MEM 占用内存百分比<br />
TIME+ 用的CPU时间</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zm@acer:~$ top
top - 17:43:09 up  7:51,  0 users,  load average: 0.52, 0.58, 0.59
Tasks:   5 total,   1 running,   3 sleeping,   1 stopped,   0 zombie
%Cpu(s): 10.0 us, 11.2 sy,  0.0 ni, 78.4 id,  0.0 wa,  0.3 hi,  0.0 si,  0.0 st
KiB Mem :  8266008 total,  2612644 free,  5424012 used,   229352 buff/cache
KiB Swap: 25165824 total, 24981728 free,   184096 used.  2708264 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
    1 root      20   0    8324    156    132 S   0.0  0.0   0:00.15 init
    3 root      20   0    8332    160    120 S   0.0  0.0   0:00.01 init
    4 zm        20   0   17020   3708   3604 S   0.0  0.0   0:00.88 bash
   28 zm        20   0   13144   1484   1116 T   0.0  0.0   0:00.01 bc
   99 zm        20   0   17632   2068   1516 R   0.0  0.0   0:00.08 top
</code></pre></div></div>

<h5 id="58-ps">5.8 ps</h5>

<p>查阅进程状态(process status)。</p>

<p>状态有三种:S(Sleep)，R(Run)， Z(Zombie)。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zm@acer:~$ ps
  PID TTY          TIME CMD
    4 tty1     00:00:00 bash
   28 tty1     00:00:00 ps
zm@acer:~$ ps -S
  PID TTY      STAT   TIME COMMAND
    4 tty1     S      0:01 -bash
   29 tty1     R      0:00 ps -S
</code></pre></div></div>

<h5 id="59-free">5.9 free</h5>

<p>了解内存实用情况，单位kb。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zm@acer:~$ free
              total        used        free      shared  buff/cache   available
Mem:        8266008     5049136     2987520       17720      229352     3083140
Swap:      25165824      173072    24992752
</code></pre></div></div>
<p>Linux为提高效率，使用程序暂时不用的内存，缓冲读写过的磁盘信息。 
当前有229352kb的buffer/cache；不计buffers/cache，系统有实际可利用资源3083140kb。</p>

<h5 id="510-vmstat">5.10 vmstat</h5>

<p>了解系统负载。</p>

<blockquote>

  <p>procs r：可执行的进程数(包含运行中的及等待运行的)；b：处在非中断睡眠状态的进程数；<br />
memory free：空闲的内存, buff/cache：用做缓存的内存数；<br />
swap 磁盘/内存的交换页数量，单位：KB/秒；<br />
io 块设备I/O块数，单位：块/秒；<br />
system in：每秒的硬件中断数(interrupt)；cs：每秒的环境切换次数(context switch)；<br />
cpu cpu使用率 us=user, sy=system, id=idle，wa=wait for disk I/O。</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zm@ubuntu:~$ vmstat
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 0  0      0 776988  35512 531468    0    0    77     2   61   88  1  1 95  3  0
</code></pre></div></div>


	
	</div>

<script src="/js/post.js" type="text/javascript"></script>






</body>

</html>
