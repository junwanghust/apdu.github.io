<!DOCTYPE html>
<html>
<head>
    <!--
    * Author:         APDU
    -->
    
  
    <meta charset="utf-8" />
    <title>Linux笔记：文本信息处理 | Notes</title>
    <meta name="author" content="ZM" />
    <meta name="renderer" content="webkit">
    <meta name="description" content="Notes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
	<link rel="stylesheet" href="/css/default.css" type="text/css" />  
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />  
    <script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>
	<script src="/js/prettify/prettify.js"></script>
		
    <!--script src="/js/mermaid/mermaid.min.js"></script-->
	<script src="https://cdn.bootcss.com/mermaid/8.0.0/mermaid.min.js"></script>	
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ], 
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code', 'a', 'blockquote'] 
      }
    });
	</script>
	
	<!--script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script-->
	<script src="https://cdn.bootcss.com/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"  type="text/javascript"></script>
	 
</head>
<body>
       
    <div class="index-content">
    <div class="section">
        <ul class="artical-cate">
            <li style="text-align:left"><a href="/"><span>Home</span></a></li>
            <li style="text-align:center"><a href="/category"><span>Index</span></a></li>
            <li style="text-align:right"><a href="/about"><span>About</span></a></li>
        </ul>
	</div>
	
	
</div>	

<div id="content">
	<h1 class="entry-title"><a href="/notes/2019/01/04/linuxnote02.html" title="Linux笔记：文本信息处理">Linux笔记：文本信息处理</a></h1>
	<p class="entry-date">2019-01-04</p>
	<h3 id="1-linux中的文本信息">1. Linux中的文本信息</h3>

<h5 id="11-文本文件">1.1 文本文件</h5>
<p>C语言，Java语言等编程文件的源程序语言；<br />
文本格式的数据文件；<br />
文本格式的文字信息。</p>

<h5 id="12-程序输出">1.2 程序输出</h5>

<h5 id="13-系统配置信息">1.3 系统配置信息</h5>
<p>/etc下的配置文件。</p>

<h5 id="14-文本型网络协议">1.4 文本型网络协议</h5>
<p>因特网大部分传输层以上的协议是文本型协议；<br />
会话层协议：HTTP，POP3，SMTP，IMAP；<br />
表示层协议：HTML，XML，MIME。</p>

<h5 id="15-文本文件处理的命令">1.5 文本文件处理的命令</h5>
<p>Linux提供大量的文本文件处理的命令，多数命令都有复杂的选项。</p>

<h3 id="2-重定向与管道">2. 重定向与管道</h3>

<p>Linux鼓励使用重定向或管道机制将多个工具命令组合在一起，提供灵活的功能。</p>

<h5 id="21-输入重定向">2.1 输入重定向</h5>

<p>将标准输入重定向到一个磁盘文件，而不是从键盘输入。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sort &lt; filelist.txt
</code></pre></div></div>

<h5 id="22-输出重定向">2.2 输出重定向</h5>

<p>将标准输出重定向到一个磁盘文件，而不是在终端显示。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls –l &gt; filelist.txt    //直接覆盖原文件
ls –l &gt;&gt; filelist.txt   //在原文件的基础上追加
</code></pre></div></div>
<h5 id="23-管道机制">2.3 管道机制</h5>

<p>使用管道可以将两个命令连接起来，前一个命令的输出作为后一个命令的输入。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls -l | sort
</code></pre></div></div>

<h3 id="3-文本文件读取命令">3. 文本文件读取命令</h3>

<h5 id="31-moreless">3.1 more/less</h5>

<p>一般Unix系统中都提供这两个命令，more命令最先由BSD UNIX开发，最初的功能是用于显示满屏后，
等待用户按键，再显示多(more)一点。</p>

<p>Linux中增加了less命令，除了more命令的功能外，还允许回退显示，显示比当前内容少(less)一点。</p>

<p>某些系统中，more命令融入了less的功能，以Ubuntu为例，使用more命令满屏显示后可进行如下操作：</p>

<table>
  <thead>
    <tr>
      <th>Space</th>
      <th>显示下一屏</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Enter</td>
      <td>上滚一行，将下一页的首行显示到当前屏幕</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>j</td>
      <td>同上</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>k</td>
      <td>下滚一行，将上一页的末行显示到当前屏幕</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>PgUp</td>
      <td>显示下一屏</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>PgDn</td>
      <td>显示上一屏</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>q</td>
      <td>退出more命令</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>/pattern</td>
      <td>搜索指定模式的字符串，模式描述使用正则表达式</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>/</td>
      <td>查找指定模式的字符串</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>h</td>
      <td>帮助信息，打印more命令的所有功能列表</td>
    </tr>
  </tbody>
</table>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>more test.py  //指定一个文件
more *.py     //指定多个文件
ls -l | more  //指定0个文件
less test.py
</code></pre></div></div>

<h5 id="32-catod">3.2 cat/od</h5>

<p>cat，可以concatenate一个或多个文件，并将文本文件的内容输出到标准输出；-n选项可以显示行号。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat -n test.py     //打印test.py的内容到屏幕
cat &gt; test.txt  //从标准输入获取数据，直到按下Ctrl-D(eof)，并重定向到test.txt文件中。
cat test1.txt test2.txt &gt; test3.txt  //将test1、test2文件的内容重定向到test3
cat makefile *.[ch] &gt; src
</code></pre></div></div>

<p>od，octal dump的缩写，八进制打印，可以打印可执行文件、非文本格式的数据等；-x选项使用十六进制打印文件内容；
-c选项对于可打印字符则打印字符，否则打印ASCII码。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>od -x test.txt
od -c test.txt
</code></pre></div></div>

<h5 id="33-headtail">3.3 head/tail</h5>

<p>head显示文件的头部，tail命令显示文件的尾部，默认只选择10行；-n选项可以选择行数，-f(forever)选项可以实时打印文件被追加的内容。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>head -n 15 test.txt test.py    //分别显示文件的前15行
head –n -20 test.txt           //除去文件尾部20行其余均算“头”

tail -n 15 test.txt test.py    //分别显示文件的末尾15行
tail –n -20 test.txt           //除去文件头部20行其余均算“尾”

ls -l | head -n 20

tail -f debug.txt              //实时打印文件尾部被追加的内容
</code></pre></div></div>

<h3 id="4-文本文件处理命令">4. 文本文件处理命令</h3>

<h5 id="41-tee">4.1 tee</h5>

<p>许多程序员都有过这样的经历，编写源程序，编译后运行，运行过程中有许多打印，但是打印的信息较多，很快地滚动过屏幕，程序员又想再重新看看已经滚过屏幕的信息，这时就可以使用tee命令。</p>

<p>tee将从标准输入stdin得到的数据抄送到标准输出stdout，同时存入磁盘文件中，-a选项可以将信息追加到文件末尾而不是覆盖。</p>

<p>这一功能类似水管的T型的三通，命令取一个字母t太短，根据字母t的发音取名tee。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mycmd | tee debug.log          //将mycmd命令执行的结果输出到stdout及debug.log文件 
ls -l | tee test.log           //将ls -l显示的内容输出的stdout及test.log
</code></pre></div></div>

<h5 id="42-wc">4.2 wc</h5>

<p>字计数(word count)命令wc，可以列出文件中一共有多少行，有多少个单词，多少字符；当指定的文件数大于1时，最后还列出一个合计。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wc test.py             //显示行数、单词数、字符数  
wc test.py test.txt
wc -l test.py          //只显示行数
who | wc -l
</code></pre></div></div>

<h5 id="43-sort">4.3 sort</h5>

<p>sort有许多选项，可以根据需要选择一行中某一部分作为排序关键字，选择升序或降序，取消相同内容的行，
字符串比较时对字母是否区分大小写等等。</p>

<p>默认的排序方法是，将文件每行作为一个整体，按照ASCII码字符串的方式比较，从小到大排列。字符串比较时，注意会出现8 &gt; 1000。</p>

<p>-n(Numberic)选项，对于数字按照算术值大小排序，而不是按照字符串比较规则。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sort test.py
ls -s | sort -n | head -n 10      //按照文件大小(size)排序，列出目录下前10大的文件
</code></pre></div></div>

<h5 id="44-tr">4.4 tr</h5>

<p>用法：tr string1 string2<br />
把标准输入拷贝到标准输出，string1中出现的字符替换为string2中的对应字符。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat test.txt | tr 1 2             //将文件中的1替换成2
cat test.txt | tr '\012' t        //将文件中的换行符替换成t
cat test.txt | tr '[a-z]' '[A-Z]' //将文件中的小写字母替换成大写字母
</code></pre></div></div>

<h5 id="45-uniq">4.5 uniq</h5>

<p>用法：uniq [options] [[input-file] output-file]</p>

<p>options = -u，只保留没有重复的行，unique；<br />
options = -d，只保留有重复的行，但只打印一次；  <br />
options = -c，打印重复的行数，行内容(重复的行只打印一次)；
不带options时，则打印没有重复的行和有重复的行(只打印一次)。</p>

<p>两个相邻的行，如果内容一样，则是重复的行。</p>

<p>第二个文件会被当成输出文件，故uniq不支持处理多个文件。</p>

<h5 id="46-grep">4.6 grep</h5>

<p>用法：grep pattern file-list</p>

<p>grep（Global regular expression print）命令是一种文本过滤程序，
按照正则表达式的规则，仅筛选出含有指定模式字符串的文本行。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>grep import test.py  //查找文件中import出现的行
grep import *.py
</code></pre></div></div>

	
	</div>

<script src="/js/post.js" type="text/javascript"></script>






</body>

</html>
